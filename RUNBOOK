ğŸ§­ Authoritative Runbook

End-to-End Startup â†’ CDC â†’ Bronze â†’ OpenMetadata

ğŸŸ¦ Phase 0 â€” Preconditions (Run Once)

From your repo root:

pwd
# ~/data-governance-portfolio


Verify Docker is clean (recommended before demos):

docker compose down -v
docker system prune -f

ğŸŸ¦ Phase 1 â€” Start All Core Services
1ï¸âƒ£ Build & start containers

(HOST MACHINE)

docker compose up --build -d

2ï¸âƒ£ Verify containers are running

(HOST MACHINE)

docker ps


You must see (minimum):

sqlserver

kafka

zookeeper

debezium

openmetadata_server

openmetadata_ingestion

openmetadata_mysql

openmetadata_elasticsearch

ğŸŸ¦ Phase 2 â€” Wait for Platform Readiness
3ï¸âƒ£ Wait for all dependencies

(HOST MACHINE)

./bootstrap/01-wait-for-services.sh


Expected output:

âœ… OpenMetadata is healthy
âœ… Kafka Connect is ready
âœ… SQL Server is accepting connections
ğŸ‰ All core services are ready


âŒ DO NOT CONTINUE UNTIL THIS PASSES

ğŸŸ¦ Phase 3 â€” Register Kafka Connect (CDC + Bronze Sink)
4ï¸âƒ£ Register Debezium + JDBC Sink

(HOST MACHINE)

./bootstrap/02-register-kafka-connect.sh


Expected:

â–¶ Register Debezium SQL Server CDC
â–¶ Register JDBC Sink (Bronze)
âœ… Kafka Connect configured

5ï¸âƒ£ Validate Kafka topics

(HOST MACHINE)

docker exec -it kafka \
  kafka-topics --bootstrap-server kafka:9092 --list


You MUST see:

aw.AdventureWorks2022.Sales.SalesOrderHeader
aw.AdventureWorks2022.Sales.SalesOrderDetail


If not â†’ STOP.

ğŸŸ¦ Phase 4 â€” Enter OpenMetadata Ingestion Runtime
6ï¸âƒ£ Exec into ingestion container

(HOST MACHINE â†’ CONTAINER)

docker exec -it openmetadata_ingestion bash


Prompt should change to:

airflow@<container-id>:/opt/airflow$

7ï¸âƒ£ Verify OpenMetadata CLI exists

(INSIDE CONTAINER)

which metadata


Expected:

/home/airflow/.local/bin/metadata

ğŸŸ¦ Phase 5 â€” Register Services in OpenMetadata
8ï¸âƒ£ Register all services (Kafka + SQL)

(INSIDE CONTAINER)

cd /opt/airflow
./openmetadata/scripts/register_services.sh


This registers:

Kafka service

SQL Server OLTP

SQL Server Staging

9ï¸âƒ£ Verify services registered (API)

(INSIDE CONTAINER)

metadata service list


You should see:

kafka_aw

sqlserver_oltp

sqlserver_staging

ğŸŸ¦ Phase 6 â€” Run Metadata Ingestion Pipelines
ğŸ”Ÿ Run all ingestion pipelines

(INSIDE CONTAINER)

./openmetadata/scripts/run_ingestion.sh


This executes:

Kafka topic ingestion

SQL Server OLTP metadata ingestion

SQL Server Staging metadata ingestion

dbt lineage (if configured)

1ï¸âƒ£1ï¸âƒ£ Check ingestion status

(INSIDE CONTAINER)

metadata ingest status


Expected:

SUCCESS

ğŸŸ¦ Phase 7 â€” Validate Results (UI + DB)
1ï¸âƒ£2ï¸âƒ£ Open OpenMetadata UI

(BROWSER)

http://localhost:8585


Login:

user: admin

password: admin

1ï¸âƒ£3ï¸âƒ£ Validate entities
âœ” Services

Kafka

SQL Server (OLTP)

SQL Server (Staging)

âœ” Kafka

Topics:

aw.AdventureWorks2022.Sales.SalesOrderHeader

aw.AdventureWorks2022.Sales.SalesOrderDetail

âœ” Tables

AdventureWorks_Staging.bronze.*

âœ” Lineage
Kafka Topic
   â†“
Bronze Table

ğŸŸ¦ Phase 8 â€” CDC Validation (Critical)
1ï¸âƒ£4ï¸âƒ£ Trigger a CDC event

(HOST MACHINE)

docker exec -it sqlserver \
  /opt/mssql-tools18/bin/sqlcmd \
  -S localhost -U sa -P "$SA_PASSWORD" -C

USE AdventureWorks2022;
GO
UPDATE Sales.SalesOrderHeader
SET RevisionNumber = RevisionNumber
WHERE SalesOrderID = 43659;
GO

1ï¸âƒ£5ï¸âƒ£ Confirm Bronze ingestion

(HOST MACHINE)

docker exec -it sqlserver \
  /opt/mssql-tools18/bin/sqlcmd \
  -S localhost -U sa -P "$SA_PASSWORD" -C

USE AdventureWorks_Staging;
GO
SELECT COUNT(*) FROM bronze.aw_AdventureWorks2022_Sales_SalesOrderHeader;
GO

ğŸ DONE â€” Platform Is Live

You now have:

âœ… SQL Server CDC
âœ… Kafka Topics
âœ… Bronze Landing Zone
âœ… OpenMetadata Governance
âœ… Lineage
âœ… Reproducible bootstrap

This is industry-grade.

ğŸ”œ Next Enhancements (Optional)

Add Airflow scheduling

Add PII classification

Add DQ checks

Add Gold layer lineage
